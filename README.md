# networks-multiuser-lab

![image](https://github.com/user-attachments/assets/b3b2689e-ffc2-412f-86e1-a0a602d8f5e7)

1. В данной топологии выставить значение 3-го октета в зависимости от своего номера в группе (в локальных и глобальных сетях). В локальных сетях использовать сети 192.168.N.0/24, 192.168.N+1.0/24, 192.168.N+2.0/24 

2. Настроить внутреннюю локальную сеть на коммутаторах и проверить работоспособность транков 

3. Настроить маршрутизацию между VLAN-ами. В качестве Шлюза настроить L3 switch (DS1, DS2). Подсказка: чтобы настроить маршрутизацию между VLAN, необходимо настроить логические интерфейсы на DS1, DS2, а также перевести коммутаторы в режим L3, с помощью команды "ip routing" в режиме конфигурации. Далее создаём SVI интерфейсы на коммутаторах(DS1, DS2) и прописываем их адреса в default gateway конечных устройств

4. Организовать в сети DHCP, DNS и WEB-сервер

5. Организовать доступ пользователей в глобальную сеть, а также доступ из глобальной сети к сайту компании  (WEB)
Адреса для служебных сетей между роутерами и L3, как вы можете наблюдать -  174.16.N.0/30 для организации точка-точка
Роутеры BG1 BG2 граничные с глобальной сетью. Для настройки маршрутизации между DS1, BG1, DS2, BG2 используем протоколы(OSPF, EIGRP).  
Далее, когда динамика настроена, надо настроить между BG1, BG2 и ISP1 статику, чтобы можно было достучаться до глобальной сети

6. Когда вы попробуете пингануть сервер гугла, то вы должны столкнуться с неудачей, что есть хорошо. Чтобы это побороть, мы должны настроить PAT на BG1, BG2, чтобы наши пакеты выходили в сеть с глобальными адресами, тогда вы сможете достучаться до серверов. Как только вы сможете это победить, переходим к следующему пункту
 
7. Теперь откроем внешнему миру доступ к WEB-серверу. Чтобы это сделать, применим также технологию PAT, только ручным пробросом портов. Если до этого технология PAT работала динамически на выход, сопоставляя в таблице ip-адреса и порты, то чтобы внешний мир мог достучаться до WEB-сервера, мы вручную пропишем сопоставление внешнего ip-адреса и порта с внутренним ip-адресом и портом. В случае с топологией ( адрес 192.168.10.12 надо транслировать в 86.40.47.2 на BG1 к примеру, и на BG2 соответственно другой адрес) 
После чего, если пользователи постучатся на внешний ip 86.40.47.2 на 80-й порт, то смогут попасть на страничку WEB-сервера. Можете проверить доступность с компьютера(scamer), который в сети 24.165.47.0/24 

8. Как вы могли заметить, в жизни мы не используем ip адреса, поэтому обернем это в человеко-понятный вид.  
Добвим на сервере гугла 8.8.8.8  запись ya.ru = 86.40.47.2; попробуем со scamer зайти на WEB-страницу через ya.ru 

9. Теперь представим, что мы решили не экономить, настраивая наш PAT перегрузкой интерфейса BG1 и BG2 (как мы сделали выше, дав нашему серверу адрес 86.40.47.2 и другой, перегрузив интерфейсы BG1 и BG2, которые смотрят в сторону ISP) и купили себе подсеть 209.64.200.0/24.  
Заставим пользователей стучаться на WEB сервер через адрес 209.65.200.200/24. Организовывать доступ по этому адресу будем через BG2.   
Для того, чтобы организовать доступ по такому адресу, необязательно, чтобы эта сеть существовала между устройствами. Можно просто создать ip route 209.64.200.0 255.255.255.0 Null0 (чтобы когда мы расскажем маршрутизаторам об этой сети, весь трафик, кроме нужного нам, сбрасывался в null).  
Для того, чтобы маршрутизатор ISP узнал о нашей сети, установим BGP сессию с BG2, чтобы он рассказал о маршруте в своей таблице маршрутизации(209 который)  
Далее пропишем на BG2 трансляцию "ip nat inside source static tcp 192.168.10.12 80 209.65.200.200 80, тогда будет проходить только трафик по адресу 200, все остальное будет сбрасываться в Null, как я и описал выше.

10. Прокинуть между офисом слева, в офис справа GRE-тоннель, поверх которого настроить динамическую маршрутизацию (доказательство работоспособности заключается в том, что по сути вы будете в одной локальной сети, хоть вас и разделяет интернет)
